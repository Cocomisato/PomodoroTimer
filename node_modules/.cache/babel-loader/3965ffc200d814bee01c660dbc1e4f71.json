{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tab = tab;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"./utils\");\n\nvar _focus = require(\"./focus\");\n\nvar _blur = require(\"./blur\");\n\nfunction getNextElement(currentIndex, shift, elements, focusTrap) {\n  if (focusTrap === document && currentIndex === 0 && shift) {\n    return document.body;\n  } else if (focusTrap === document && currentIndex === elements.length - 1 && !shift) {\n    return document.body;\n  } else {\n    const nextIndex = shift ? currentIndex - 1 : currentIndex + 1;\n    const defaultIndex = shift ? elements.length - 1 : 0;\n    return elements[nextIndex] || elements[defaultIndex];\n  }\n}\n\nfunction tab({\n  shift = false,\n  focusTrap\n} = {}) {\n  var _focusTrap$ownerDocum, _focusTrap;\n\n  const previousElement = (0, _utils.getActiveElement)((_focusTrap$ownerDocum = (_focusTrap = focusTrap) == null ? void 0 : _focusTrap.ownerDocument) != null ? _focusTrap$ownerDocum : document);\n\n  if (!focusTrap) {\n    focusTrap = document;\n  }\n\n  const focusableElements = focusTrap.querySelectorAll(_utils.FOCUSABLE_SELECTOR);\n  const enabledElements = [...focusableElements].filter(el => el.getAttribute('tabindex') !== '-1' && !el.disabled);\n  if (enabledElements.length === 0) return;\n  const orderedElements = enabledElements.map((el, idx) => ({\n    el,\n    idx\n  })).sort((a, b) => {\n    const tabIndexA = a.el.getAttribute('tabindex');\n    const tabIndexB = b.el.getAttribute('tabindex');\n    const diff = tabIndexA - tabIndexB;\n    return diff === 0 ? a.idx - b.idx : diff;\n  }).map(({\n    el\n  }) => el);\n  if (shift) orderedElements.reverse(); // keep only the checked or first element in each radio group\n\n  const prunedElements = [];\n\n  for (const el of orderedElements) {\n    if (el.type === 'radio' && el.name) {\n      const replacedIndex = prunedElements.findIndex(({\n        name\n      }) => name === el.name);\n\n      if (replacedIndex === -1) {\n        prunedElements.push(el);\n      } else if (el.checked) {\n        prunedElements.splice(replacedIndex, 1);\n        prunedElements.push(el);\n      }\n    } else {\n      prunedElements.push(el);\n    }\n  }\n\n  if (shift) prunedElements.reverse();\n  const index = prunedElements.findIndex(el => el === el.ownerDocument.activeElement);\n  const nextElement = getNextElement(index, shift, prunedElements, focusTrap);\n  const shiftKeyInit = {\n    key: 'Shift',\n    keyCode: 16,\n    shiftKey: true\n  };\n  const tabKeyInit = {\n    key: 'Tab',\n    keyCode: 9,\n    shiftKey: shift\n  };\n  let continueToTab = true; // not sure how to make it so there's no previous element...\n  // istanbul ignore else\n\n  if (previousElement) {\n    // preventDefault on the shift key makes no difference\n    if (shift) _dom.fireEvent.keyDown(previousElement, { ...shiftKeyInit\n    });\n    continueToTab = _dom.fireEvent.keyDown(previousElement, { ...tabKeyInit\n    });\n\n    if (continueToTab) {\n      (0, _blur.blur)(previousElement);\n    }\n  }\n\n  const keyUpTarget = !continueToTab && previousElement ? previousElement : nextElement;\n\n  if (continueToTab) {\n    (0, _focus.focus)(nextElement);\n  }\n\n  _dom.fireEvent.keyUp(keyUpTarget, { ...tabKeyInit\n  });\n\n  if (shift) {\n    _dom.fireEvent.keyUp(keyUpTarget, { ...shiftKeyInit,\n      shiftKey: false\n    });\n  }\n}\n/*\neslint\n  complexity: \"off\",\n  max-statements: \"off\",\n*/","map":{"version":3,"sources":["/Users/misato/Documents/Coding/Qualified/Project_Pomodoro_timer_Qualified_1/node_modules/@testing-library/user-event/dist/tab.js"],"names":["Object","defineProperty","exports","value","tab","_dom","require","_utils","_focus","_blur","getNextElement","currentIndex","shift","elements","focusTrap","document","body","length","nextIndex","defaultIndex","_focusTrap$ownerDocum","_focusTrap","previousElement","getActiveElement","ownerDocument","focusableElements","querySelectorAll","FOCUSABLE_SELECTOR","enabledElements","filter","el","getAttribute","disabled","orderedElements","map","idx","sort","a","b","tabIndexA","tabIndexB","diff","reverse","prunedElements","type","name","replacedIndex","findIndex","push","checked","splice","index","activeElement","nextElement","shiftKeyInit","key","keyCode","shiftKey","tabKeyInit","continueToTab","fireEvent","keyDown","blur","keyUpTarget","focus","keyUp"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tab = tab;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"./utils\");\n\nvar _focus = require(\"./focus\");\n\nvar _blur = require(\"./blur\");\n\nfunction getNextElement(currentIndex, shift, elements, focusTrap) {\n  if (focusTrap === document && currentIndex === 0 && shift) {\n    return document.body;\n  } else if (focusTrap === document && currentIndex === elements.length - 1 && !shift) {\n    return document.body;\n  } else {\n    const nextIndex = shift ? currentIndex - 1 : currentIndex + 1;\n    const defaultIndex = shift ? elements.length - 1 : 0;\n    return elements[nextIndex] || elements[defaultIndex];\n  }\n}\n\nfunction tab({\n  shift = false,\n  focusTrap\n} = {}) {\n  var _focusTrap$ownerDocum, _focusTrap;\n\n  const previousElement = (0, _utils.getActiveElement)((_focusTrap$ownerDocum = (_focusTrap = focusTrap) == null ? void 0 : _focusTrap.ownerDocument) != null ? _focusTrap$ownerDocum : document);\n\n  if (!focusTrap) {\n    focusTrap = document;\n  }\n\n  const focusableElements = focusTrap.querySelectorAll(_utils.FOCUSABLE_SELECTOR);\n  const enabledElements = [...focusableElements].filter(el => el.getAttribute('tabindex') !== '-1' && !el.disabled);\n  if (enabledElements.length === 0) return;\n  const orderedElements = enabledElements.map((el, idx) => ({\n    el,\n    idx\n  })).sort((a, b) => {\n    const tabIndexA = a.el.getAttribute('tabindex');\n    const tabIndexB = b.el.getAttribute('tabindex');\n    const diff = tabIndexA - tabIndexB;\n    return diff === 0 ? a.idx - b.idx : diff;\n  }).map(({\n    el\n  }) => el);\n  if (shift) orderedElements.reverse(); // keep only the checked or first element in each radio group\n\n  const prunedElements = [];\n\n  for (const el of orderedElements) {\n    if (el.type === 'radio' && el.name) {\n      const replacedIndex = prunedElements.findIndex(({\n        name\n      }) => name === el.name);\n\n      if (replacedIndex === -1) {\n        prunedElements.push(el);\n      } else if (el.checked) {\n        prunedElements.splice(replacedIndex, 1);\n        prunedElements.push(el);\n      }\n    } else {\n      prunedElements.push(el);\n    }\n  }\n\n  if (shift) prunedElements.reverse();\n  const index = prunedElements.findIndex(el => el === el.ownerDocument.activeElement);\n  const nextElement = getNextElement(index, shift, prunedElements, focusTrap);\n  const shiftKeyInit = {\n    key: 'Shift',\n    keyCode: 16,\n    shiftKey: true\n  };\n  const tabKeyInit = {\n    key: 'Tab',\n    keyCode: 9,\n    shiftKey: shift\n  };\n  let continueToTab = true; // not sure how to make it so there's no previous element...\n  // istanbul ignore else\n\n  if (previousElement) {\n    // preventDefault on the shift key makes no difference\n    if (shift) _dom.fireEvent.keyDown(previousElement, { ...shiftKeyInit\n    });\n    continueToTab = _dom.fireEvent.keyDown(previousElement, { ...tabKeyInit\n    });\n\n    if (continueToTab) {\n      (0, _blur.blur)(previousElement);\n    }\n  }\n\n  const keyUpTarget = !continueToTab && previousElement ? previousElement : nextElement;\n\n  if (continueToTab) {\n    (0, _focus.focus)(nextElement);\n  }\n\n  _dom.fireEvent.keyUp(keyUpTarget, { ...tabKeyInit\n  });\n\n  if (shift) {\n    _dom.fireEvent.keyUp(keyUpTarget, { ...shiftKeyInit,\n      shiftKey: false\n    });\n  }\n}\n/*\neslint\n  complexity: \"off\",\n  max-statements: \"off\",\n*/"]},"metadata":{},"sourceType":"script"}